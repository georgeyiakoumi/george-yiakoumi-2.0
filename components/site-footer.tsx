"use client";

import { useState } from "react";
import { AUTHOR } from "@/lib/constants";
import {
  Tooltip,
  TooltipContent,
  TooltipProvider,
  TooltipTrigger,
} from "@/components/ui/tooltip";
import {
  Drawer,
  DrawerClose,
  DrawerContent,
  DrawerDescription,
  DrawerFooter,
  DrawerHeader,
  DrawerTitle,
  DrawerTrigger,
} from "@/components/ui/drawer";
import { Button } from "@/components/ui/button";

export function SiteFooter() {
  const currentYear = new Date().getFullYear();
  const [open, setOpen] = useState(false);

  const LogoSVG = () => (
    <svg
      viewBox="-24 -24 337 533"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      className="size-8 md:size-10"
    >
      <path
        d="M288.53 0.039978C281.7 18.73 272.02 36.06 260 51.49C256.36 56.17 252.5 60.68 248.45 65C244.41 69.29 240.18 73.4 235.76 77.31C230.74 81.76 225.47 85.94 220 89.84C219.38 90.28 218.76 90.71 218.14 91.14C211.74 95.59 205.05 99.66 198.11 103.3C192.61 106.2 186.94 108.83 181.14 111.18C180.76 111.34 180.38 111.49 180 111.64C167.28 116.7 153.89 120.42 140 122.63C131.73 123.95 123.29 124.73 114.7 124.94C114.33 124.94 113.96 124.95 113.59 124.96C112.4 124.97 111.2 125 110 125C109.13 125 108.26 124.99 107.4 124.98H107.36C82.5701 124.75 58.3201 121.2 35.1001 114.53C36.3201 113.38 37.5801 112.26 38.8601 111.18C57.4601 95.37 81.3501 85.62 107.47 85.03C108.31 85.01 109.16 85 110 85C120.12 85 130.13 84.35 140 83.07C153.66 81.31 167.03 78.33 180 74.21C184.23 72.87 188.41 71.4 192.55 69.81C197.46 67.92 202.3 65.87 207.06 63.65C211.44 61.61 215.76 59.43 220 57.11C224.21 54.81 228.36 52.38 232.43 49.81C242.05 43.73 251.27 36.91 260 29.36C264.33 25.63 268.54 21.72 272.63 17.63C278.26 12 283.57 6.12998 288.53 0.039978Z"
        className="fill-foreground stroke-background"
        strokeWidth="24"
        strokeLinejoin="round"
        strokeLinecap="round"
        style={{ paintOrder: 'stroke' }}
      />
      <path
        d="M220 144.9V375C220 381.28 219.47 387.44 218.45 393.44C218.45 393.45 218.44 393.45 218.44 393.45C213.95 419.99 199.92 443.31 180 459.78C168.42 469.36 154.85 476.62 140 480.84C130.47 483.55 120.4 485 110 485C109.61 485 109.22 484.99 108.84 484.98C108.64 484.98 108.45 484.98 108.26 484.97C108.06 484.97 107.86 484.97 107.67 484.96C107.43 484.96 107.19 484.95 106.95 484.95H106.93C106.1 484.93 105.28 484.9 104.45 484.85H104.41C102.78 484.77 101.16 484.65 99.54 484.5C97.18 484.28 94.84 483.98 92.52 483.61C92.45 483.59 92.37 483.58 92.29 483.57C90.75 483.32 89.21 483.03 87.68 482.72C87.6 482.7 87.52 482.68 87.44 482.67C84.34 482.02 81.28 481.24 78.27 480.33C77.51 480.1 76.75 479.86 76 479.62C75.25 479.37 74.5 479.12 73.75 478.86C73.71 478.84 73.67 478.83 73.63 478.82C72.18 478.31 70.75 477.77 69.33 477.2C68.59 476.91 67.87 476.61 67.15 476.3C66.55 476.05 65.95 475.79 65.36 475.52C64.52 475.15 63.68 474.76 62.86 474.37C62.23 474.07 61.6 473.77 60.98 473.45C58.1 472.02 55.3 470.46 52.58 468.79C51.25 467.97 49.95 467.13 48.66 466.26C48.1 465.88 47.54 465.5 46.99 465.11C46.2 464.56 45.43 464 44.66 463.44C44.1 463.02 43.55 462.6 43 462.18C42.43 461.74 41.87 461.3 41.32 460.86C41.23 460.79 41.15 460.73 41.08 460.67C40.56 460.25 40.04 459.82 39.53 459.39C39.45 459.32 39.36 459.25 39.28 459.18C38.84 458.81 38.4 458.43 37.96 458.05C36.29 456.61 34.68 455.12 33.11 453.58C32.71 453.19 32.31 452.8 31.92 452.4C31.79 452.28 31.67 452.15 31.55 452.02C31.16 451.64 30.79 451.25 30.42 450.85C29.17 449.55 27.96 448.22 26.8 446.86C26.47 446.49 26.15 446.12 25.83 445.74C25.46 445.3 25.08 444.85 24.72 444.39C23.88 443.37 23.06 442.33 22.26 441.27C21.87 440.75 21.48 440.22 21.1 439.7C21.06 439.66 21.03 439.61 20.99 439.56C20.54 438.94 20.1 438.31 19.66 437.68C19.21 437.03 18.76 436.38 18.33 435.72C17.96 435.17 17.6 434.62 17.25 434.07C17.15 433.91 17.05 433.76 16.95 433.6C16.55 432.97 16.16 432.34 15.78 431.7C15.46 431.17 15.14 430.63 14.83 430.09C14.69 429.87 14.56 429.64 14.44 429.42C14.09 428.81 13.74 428.19 13.41 427.57C13.14 427.08 12.87 426.59 12.61 426.09C12.43 425.77 12.26 425.44 12.1 425.11C11.8 424.52 11.5 423.93 11.21 423.33C10.55 421.99 9.92 420.63 9.31 419.26C8.94 418.44 8.59 417.61 8.25 416.78C7.95 416.04 7.65 415.29 7.36 414.54C7.07 413.79 6.79 413.04 6.52 412.29C6.31 411.71 6.11 411.14 5.92 410.56C5.32 408.85 4.78 407.12 4.28 405.38C4.05 404.6 3.84 403.82 3.63 403.03C3.61 402.97 3.6 402.91 3.58 402.85C3.19 401.37 2.83999 399.87 2.50999 398.36C2.15999 396.74 1.84 395.1 1.56 393.45C1.56 393.45 1.55 393.45 1.55 393.44C0.530003 387.44 0 381.28 0 375C0 366.97 0.870004 359.14 2.52 351.59C5.49 337.9 11.03 325.15 18.61 313.87C29.17 322.02 40.85 328.78 53.36 333.91C45.57 344.62 40.74 357.61 40.08 371.67C40.03 372.77 40 373.88 40 375C40 413.6 71.4 445 110 445C120.73 445 130.91 442.57 140 438.24C163.63 426.98 180 402.87 180 375V279.78C177.79 281.61 175.51 283.36 173.15 285C163.19 292.03 152.01 297.43 140 300.84C130.46 303.55 120.4 305 110 305C86.52 305 64.73 297.6 46.85 285C35.75 277.21 26.16 267.41 18.61 256.13C12.56 247.13 7.82 237.21 4.64 226.61C3.59 223.14 2.71 219.6 2.02 215.99C0.690004 209.19 0 202.18 0 195C0 190.63 0.260004 186.31 0.770004 182.07C1.74 173.67 3.69 165.55 6.47 157.83C7.6 154.69 8.86999 151.61 10.29 148.6C12.57 149.38 14.86 150.13 17.16 150.85C27.92 154.24 38.83 157.01 49.88 159.18C45.53 166.44 42.47 174.56 41 183.21C40.34 187.05 40 190.98 40 195C40 195.3 40 195.6 40.01 195.89C40.19 210.89 45.12 224.77 53.36 236.09C54.45 237.6 55.6 239.06 56.82 240.47C69.67 255.48 88.74 265 110 265C120.73 265 130.91 262.57 140 258.24C148.93 253.99 156.82 247.9 163.18 240.47C164.4 239.06 165.55 237.6 166.64 236.09C174.88 224.77 179.81 210.89 179.99 195.89H180V157.07C187.69 155.3 195.3 153.22 202.84 150.85C205.14 150.13 207.43 149.38 209.71 148.6C213.16 147.43 216.59 146.2 220 144.9Z"
        className="fill-foreground stroke-background"
        strokeWidth="24"
        strokeLinejoin="round"
        strokeLinecap="round"
        style={{ paintOrder: 'stroke' }}
      />
    </svg>
  );

  return (
    <footer className="fixed top-4 left-1/2 -translate-x-1/2 md:translate-x-0 md:bottom-4 md:top-auto md:right-4 md:bottom-4 lg:bottom-12 lg:right-12 md:left-auto box-border flex flex-col gap-4 items-start lg:items-end z-10 p-4">
      {/* Mobile/Tablet: Drawer */}
      <div className="lg:hidden">
        <Drawer open={open} onOpenChange={setOpen}>
          <DrawerTrigger asChild>
            <button className="cursor-pointer">
              <LogoSVG />
            </button>
          </DrawerTrigger>
          <DrawerContent>
            <DrawerHeader>
              <DrawerTitle>© {currentYear} {AUTHOR.fullName}</DrawerTitle>
              <DrawerDescription>
                A designer who codes. Built with Next.js & shadcn/ui.
              </DrawerDescription>
            </DrawerHeader>
            <DrawerFooter>
              <DrawerClose asChild>
                <Button variant="outline">Close</Button>
              </DrawerClose>
            </DrawerFooter>
          </DrawerContent>
        </Drawer>
      </div>

      {/* Desktop: Tooltip */}
      <div className="hidden lg:block">
        <TooltipProvider>
          <Tooltip>
            <TooltipTrigger asChild>
              <button className="cursor-default">
                <LogoSVG />
              </button>
            </TooltipTrigger>
            <TooltipContent side="left">
              <p>© {currentYear} {AUTHOR.fullName}</p>
              <p className="text-xs opacity-80 mt-1">A designer who codes. Built with Next.js & shadcn/ui.</p>
            </TooltipContent>
          </Tooltip>
        </TooltipProvider>
      </div>
    </footer>
  );
}
